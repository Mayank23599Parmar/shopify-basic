<!-- collection-list -->
{% case section.settings.width %}
  {% when 2 %}
    {%- assign width = "col-sm-6" -%}
  {% when 3 %}
    {%- assign width = "col-sm-4" -%}
  {% else %}
    {%- assign width = "col-sm-3" -%}
{% endcase %}

{%- case section.settings.width_xs -%}
  {%- when 1 -%}
  {%- assign width_xs = "col-xs-12" -%}
  {%- when 2 -%}
  {%- assign width_xs = "col-xs-6" -%}
  {%- else -%}
  {%- assign width_xs = "col-xs-4" -%}
{%- endcase -%}
<div class="collection-list collection-list-{{section.id}}  {{section.settings.section_background}}">
  <div class="{% if section.settings.full %}container-fluid{% else %}container{% endif %}">
    <ul class="flex-view space list scroll-ul ">
      {%- for block in section.blocks -%}
        {%- assign collection = collections[block.settings.collection] -%}
        <li class="li {{width}} {{width_xs}} collection-items">
          <div class="collection-image-warpper">
            <div class="product-img-frame">
              {%- render 'srcset', src_name:section.settings.collection_bg_img,src_alt:collection.title -%}
            </div>
            <script class="myss">{{collection | json}}</script>
            <div class="image">
              <a href="products/{{collection.products[0].handle}}">
                {%- assign src_name = blank -%}
                {%- assign src_name = collection.image -%}
                {%- if src_name == blank -%}
                  {%- assign src_name = collection.products[0].featured_image.src -%}
                {%- endif -%}
                {%- if src_name == blank -%}
                  {{ 'collection-' | append: forloop.index | placeholder_svg_tag: 'placeholder-svg' }}
                {%- else -%}
                  <div class="img">
                    {%- render 'srcset', src_name:src_name,src_alt:collection.title -%}
                  </div>
                {%- endif -%}
              </a>
             
            </div>
            
          </div>
          {%- comment -%}
          collection descriptions
          {%- endcomment -%}
          {%- assign productTitle = collection.products[0].metafields.product.productdec -%}
          <div  class="collection-dec">
            <a class="title" href="products/{{collection.products[0].handle}}">{{collection.title}}</a>
            <p class="productDec">{{productTitle}}</p>
            <p class="price"> {{ collection.products[0].price | money_with_currency }}</p>
          </h5>
        </li>
      {% endfor %}
    </ul>
  </div>
</div>

{% schema %}
{
  "name": "Collection list",
  "settings": [
    {
      "type": "checkbox",
      "label": "Full-width",
      "id": "full"
    },
    {
      "type": "select",
      "id": "section_background",
      "label": "Color scheme",
      "options": [
        {
          "value": "default-color",
          "label": "White"
        },
        {
          "value": "light-color",
          "label": "Light"
        },
        {
          "value": "dark-color",
          "label": "Dark"
        }
      ]
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Collection List"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p>Express your collection list with description.</p>"
    },
    {
      "type": "range",
      "id": "width",
      "label": "Collection per row for desktop",
      "min": 2,
      "max": 4,
      "step": 1,
      "default": 3
    },
    {
      "type": "range",
      "id": "width_xs",
      "label": "Collection per row for mobile",
      "min": 1,
      "max": 3,
      "step": 1,
      "default": 2
    },
   {
     "type": "image_picker",
     "id": "collection_bg_img",
     "label": "collection Background Image"
   }
  ],
  "blocks": [
    {
      "name": "Collection",
      "type": "collection",
      "settings": [
        {
          "type": "collection",
          "label": "Select collection",
          "id": "collection"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Collection list",
      "category": "Collection",
      "blocks": [
        {
          "type": "collection"
        },
        {
          "type": "collection"
        },
        {
          "type": "collection"
        }
      ]
    }
  ]
}
{% endschema %}